## Purpose

Short, actionable guidance for AI code agents working in this repository.

## Big-picture architecture

- Monorepo-like layout with separate frontend and backend folders.
- Frontend: Vite + React + TypeScript. Uses TanStack Router (routeTree.gen.ts is auto-generated) and React Query for data fetching. Entry: `frontend/src/main.tsx`.
- Backend: Express + TypeScript. Uses Supabase for auth and DB. Entry: `backend/src/index.ts`. Auth routes live in `backend/src/routes/auth.ts` and Supabase client in `backend/src/utils/supabase.ts`.

## How to run (dev & build)

- Frontend (dev): from repo root: `cd frontend && pnpm install && pnpm dev` — runs `vite` (see `frontend/package.json`).
- Frontend build: `pnpm build` in `frontend` runs `tsc -b && vite build` (note the TypeScript project build step).
- Backend (dev): `cd backend && pnpm install && pnpm dev` — runs `nodemon --watch src --exec ts-node src/index.ts` (live reload).
- Backend build/start: `pnpm build` in `backend` runs `tsc`; `pnpm start` runs `node dist/index.js`.

## Environment & integration points

- Backend requires SUPABASE_URL and SUPABASE_SECRET_KEY (see `backend/src/utils/supabase.ts`). Keep secrets out of VCS.
- Frontend uses `VITE_API_URL` (accessed via `import.meta.env.VITE_API_URL`) to point to the API; default in code falls back to `http://localhost:3000` (`frontend/src/utils/api.ts`).
- CORS: backend allows origin `http://localhost:5173` by default (see `backend/src/index.ts`). If you change the frontend dev port, update CORS.

## Project-specific conventions & patterns

- Generated files: `frontend/src/routeTree.gen.ts` is auto-generated by TanStack Router — do NOT edit. Regenerate via the router tooling if needed.
- Auth flow: frontend components `AuthProvider`, `contexts/AuthContext.tsx`, and `hooks/useAuth.tsx` coordinate authentication state; backend `routes/auth.ts` proxies SignIn/SignUp to Supabase.
- API base: frontend code uses `BASE_URL` from `frontend/src/utils/api.ts`; prefer referencing that constant when adding API calls.
- Types: project uses strict TypeScript settings. Frontend uses `tsc -b` before build so respect project references and `noEmit` where applicable.

## Scripts & quick references

- frontend/package.json scripts: `dev`, `build`, `lint`, `preview`.
- backend/package.json scripts: `dev` (nodemon+ts-node), `build` (tsc), `start` (node dist).
- Lint: frontend `pnpm lint` uses ESLint configured in repository.

## Safety notes

- Supabase secret key is injected via env — do not commit. When testing locally, place values in a `.env` in `backend/` (not committed).

## Example changes (how to implement)

- Add a new API route: create `backend/src/routes/yourRoute.ts`, export a Router and mount it in `backend/src/index.ts` (follow `auth.ts` pattern). Respect CORS and return JSON.
- Add a new page/route: create a file under `frontend/src/routes/` (e.g., `pages/thing.tsx`) and let TanStack Router regenerate `routeTree.gen.ts` (or run the router tooling).

## Files worth opening first

- `frontend/src/main.tsx` — shows router, QueryClient and provider wiring.
- `frontend/src/routeTree.gen.ts` — generated routes; use to understand available routes.
- `frontend/src/utils/api.ts` — API base URL.
- `backend/src/index.ts`, `backend/src/routes/auth.ts`, `backend/src/utils/supabase.ts` — backend entry and Supabase integration.

If anything here is unclear or you want specific examples (API call skeletons, auth flows, or how to run tests), tell me which area to expand.
